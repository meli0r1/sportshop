<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}NEXUS SPORT{% endblock %}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>
<body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
    <div class="background">
        <div class="blob"></div>
        <div class="blob"></div>
        <div class="blob"></div>
    </div>

    <div class="content-wrapper">
        <header>
            <h1>NEXUS SPORT</h1>
        </header>

        <nav>
            <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/about/">–û –Ω–∞—Å</a>
            <a href="/–∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤/">–ö–∞—Ç–∞–ª–æ–≥</a>
            <a href="{% url 'cart' %}" class="cart-link">–ö–æ—Ä–∑–∏–Ω–∞</a>
            <a href="{% url 'cabinet' %}" class="lk-link">üë§ –õ–ö</a>
        </nav>

        <main class="container">
            {% if messages %}
                {% for message in messages %}
                    <div class="alert">{{ message }}</div>
                {% endfor %}
            {% endif %}
            {% block content %}{% endblock %}
        </main>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        console.log('NEXUS SPORT ‚Äî –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!');

        const carousel = document.getElementById('carousel');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        if (!carousel || !prevBtn || !nextBtn) {
            console.warn('–ö–∞—Ä—É—Å–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ HTML');
            return;
        }

        const itemWidth = 300; // —à–∏—Ä–∏–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ + –æ—Ç—Å—Ç—É–ø—ã (280 + 20)
        let currentIndex = 0;
        const totalItems = carousel.children.length;

        function moveToSlide(index) {
            if (index < 0) index = totalItems - 1;
            if (index >= totalItems) index = 0;
            currentIndex = index;
            carousel.style.transform = `translateX(-${currentIndex * itemWidth}px)`;
        }

        // –ö–Ω–æ–ø–∫–∏
        prevBtn.addEventListener('click', () => moveToSlide(currentIndex - 1));
        nextBtn.addEventListener('click', () => moveToSlide(currentIndex + 1));

        // –ê–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫–∞–∂–¥—ã–µ 4 —Å–µ–∫—É–Ω–¥—ã
        let autoSlide = setInterval(() => {
            moveToSlide(currentIndex + 1);
        }, 4000);

        // –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫—É –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
        const carouselContainer = document.querySelector('.carousel-container');
        if (carouselContainer) {
            carouselContainer.addEventListener('mouseenter', () => clearInterval(autoSlide));
            carouselContainer.addEventListener('mouseleave', () => {
                autoSlide = setInterval(() => {
                    moveToSlide(currentIndex + 1);
                }, 4000);
            });
        }
    });
</script>
</body>
</html>