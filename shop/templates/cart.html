{% extends "base.html" %}
{% block content %}
    <h1>Корзина</h1>

    {% if cart_items %}
        {% for item in cart_items %}
            <div style="display:flex;gap:25px;background:var(--card-bg);padding:25px;border-radius:20px;margin-bottom:25px;backdrop-filter:blur(10px);">
                {% if item.product.image %}
                    <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" style="width:140px;height:140px;object-fit:cover;border-radius:16px;">
                {% else %}
                    <div style="width:140px;height:140px;background:#333;border-radius:16px;"></div>
                {% endif %}
                <div>
                    <h3>{{ item.product.name }}</h3>
                    <p>Цена: {{ item.product.price }} ₽</p>
                    <p>Кол-во: {{ item.quantity }}</p>
                    <p style="font-weight:bold;color:var(--neon-blue);">Итого: {{ item.total }} ₽</p>
                </div>
            </div>
        {% endfor %}

        <div style="text-align:right;font-size:1.4em;font-weight:bold;color:var(--neon-blue);margin:20px 0;">
            Итого: {{ total }} ₽
        </div>

        <!-- Кнопка "Оформить заказ" только для авторизованных -->
        {% if user.is_authenticated %}
            <div style="text-align:center;margin:30px 0;">
                <a href="{% url 'checkout_page' %}" class="btn" style="color:var(--neon-pink);border-color:var(--neon-pink);padding:14px 35px;font-size:1.2em;">
                    Оформить заказ
                </a>
            </div>
        {% else %}
            <p style="text-align:center;color:#aaa;margin:20px 0;">
                Войдите в аккаунт, чтобы оформить заказ.
            </p>
            <div style="text-align:center;">
                <a href="{% url 'login' %}" class="btn">Войти</a>
            </div>
        {% endif %}

    {% else %}
        <p>Корзина пуста.</p>
        <a href="{% url 'catalog' %}" class="btn">В каталог</a>
    {% endif %}
{% endblock %}